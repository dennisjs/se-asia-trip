// Load and display timeline data from timeline.json
async function loadTimeline() {
  try {
    const res = await fetch("timeline.json");
    const timeline = await res.json();
    const container = document.getElementById("timeline-content");
    container.innerHTML = "";

    timeline.forEach(day => {
      const daySection = document.createElement("div");
      daySection.className = "day-section";
      daySection.innerHTML = `
        <h3>${day.day}: ${day.title}</h3>
        <p><em>${day.date}</em></p>
        <p>${day.description}</p>
        <div class="photos">${day.photos.map(photo => `
          <img src="images/${photo.id}.jpg" alt="${photo.caption}" data-src="images/${photo.id}.jpg"/>
        `).join('')}</div>`;
      container.appendChild(daySection);
    });

    document.querySelectorAll(".photos img").forEach(img => {
      img.addEventListener("click", function() {
        const overlay = document.getElementById("overlay");
        const overlayImg = document.getElementById("overlay-img");
        overlayImg.src = this.dataset.src;
        overlay.classList.add("active");
      });
    });
  } catch (e) {
    document.getElementById("timeline-content").textContent = "Failed to load timeline data.";
    console.error(e);
  }
}

window.onload = () => {
  initMap();
  updateStatus();
  loadTimeline(); // <--- IMPORTANT: call this function here
  setInterval(updateStatus, 60000);
};
